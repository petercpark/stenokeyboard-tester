<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>StenoKeyboards Tester Plover HID</title>
    <style>
      #key-layout {
        position: relative;
      }
      .key {
        position: absolute;
        border: none;
        outline: none;
        display: flex;
        justify-content: center;
        align-items: center;
      }
    </style>
  </head>
  <body>
    <div id="connect">
      <button id="connect">Connect</button>
    </div>

    <div id="information"></div>

    <div id="key-layout"></div>

    <script src="hid.js"></script>
    <script src="steno.js"></script>
    <script src="keymap.js"></script>
    <script src="graphic.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-confetti@latest/dist/js-confetti.browser.js"></script>
    <script>
      //on start initialization
      const information = document.getElementById("information");
      const jsConfetti = new JSConfetti();
      showKeys();

      information.textContent =
        "Connect the Uni and press all the keys at once, everything should light up green.";

      //machine callback
      async function onInput(inputReport) {
        const { stenoStroke, pressedKeys } = inputReport;
        console.log(pressedKeys);

        // chart
        updateKeys(pressedKeys);

        //confetti
        if (pressedKeys.length == 28)
          jsConfetti.addConfetti({
            emojis: ["ğŸŒˆ", "âš¡ï¸", "ğŸŠ", "âœ¨", "ğŸ’«", "ğŸ’"],
          });
        information.textContent = "ğŸ‰ Success! Unplug device to reset. ğŸ‰";
      }
    </script>
  </body>
</html>
